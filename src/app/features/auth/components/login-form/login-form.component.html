<div class="flex flex-col justify-center items-center min-h-screen">
  <div
    class="flex flex-col justify-center items-center lg:border-2 border-solid border-tertiary rounded-xl w-full lg:w-2/3 xl:w-1/3 h-full px-10 py-10 gap-7"
  >
    <!-- Logo -->
    <div class="flex">
      <img
        src="/assets/images/logo/logo.png"
        class="h-32 w-64 object-cover"
        alt="Logo AppGestion Commerciale"
      />
    </div>

    <!-- Titre -->
    <div
      class="text-3xl flex justify-center items-center text-center font-bold w-full"
    >
      <h1>Bienvenue sur AppGestion Commerciale</h1>
    </div>

    <!-- Sous-texte -->
    <div class="flex">
      <span class="text-sm text-center">
        Accédez à votre compte FarmShop pour gérer votre activité commerciale.
      </span>
    </div>

    <!-- Formulaire -->
    <form
      (ngSubmit)="onSubmit()"
      [formGroup]="loginForm"
      class="flex flex-col gap-4 w-full"
    >
      <div class="login-container">
        <!-- Email -->
        <div class="textbox">
          <label for="username" class="label">Email</label>
          <input
            id="username"
            type="email"
            formControlName="username"
            placeholder="Entrez votre email"
            class="input-field"
            [class.border-red-500]="
              loginForm.get('username')?.invalid &&
              loginForm.get('username')?.touched
            "
          />
          <div
            *ngIf="
              loginForm.get('username')?.hasError('required') &&
              loginForm.get('username')?.touched
            "
            class="text-red-500 text-sm"
          >
            L'email est requis.
          </div>
          <div
            *ngIf="
              loginForm.get('username')?.hasError('email') &&
              loginForm.get('username')?.touched
            "
            class="text-red-500 text-sm"
          >
            Veuillez entrer un email valide.
          </div>
        </div>

        <!-- Mot de passe -->
        <div class="textbox password-container">
          <label for="password" class="label">Mot de passe</label>
          <div class="password-input-wrapper">
            <input
              id="password"
              [type]="showPassword ? 'text' : 'password'"
              placeholder="Entrez votre mot de passe"
              class="input-field"
              formControlName="password"
              [class.border-red-500]="
                loginForm.get('password')?.invalid &&
                loginForm.get('password')?.touched
              "
            />
            <button
              type="button"
              class="button password-toggle"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="
                showPassword
                  ? 'Cacher le mot de passe'
                  : 'Afficher le mot de passe'
              "
            >
              <fa-icon [icon]="showPassword ? faEyeSlash : faEye"></fa-icon>
            </button>
          </div>
          <div
            *ngIf="
              loginForm.get('password')?.hasError('required') &&
              loginForm.get('password')?.touched
            "
            class="text-red-500 text-sm"
          >
            Le mot de passe est requis.
          </div>
          <div
            *ngIf="
              loginForm.get('password')?.hasError('minlength') &&
              loginForm.get('password')?.touched
            "
            class="text-red-500 text-sm"
          >
            Le mot de passe doit contenir au moins 6 caractères.
          </div>
        </div>

        <!-- 2FA et Mot de passe oublié -->
        <div
          class="flex flex-col xl:flex-row xl:items-center gap-10 mt-6 w-full"
        >
          <!-- Toggle button for 2FA -->
          <div class="flex items-center gap-2 w-full xl:w-1/3">
            <label
              for="twoFactorAuth"
              class="relative inline-flex items-center cursor-pointer w-full"
            >
              <div class="flex">
                <input
                  type="checkbox"
                  id="twoFactorAuth"
                  formControlName="twoFactorAuth"
                  class="sr-only peer"
                />
                <div
                  class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:top-[2px] after:absolute xl:after:top-[20px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"
                ></div>
              </div>
              <span class="ml-3 text-sm font-medium text-gray-700"
                >Authentification à deux facteurs (2FA)</span
              >
            </label>
          </div>

          <div class="mb-1 w-full xl:w-2/3 flex xl:justify-end">
            <a routerLink="/forgot-password" class="text-cyan-600"
              >Mot de passe oublié ?</a
            >
          </div>
        </div>

        <!-- Bouton de soumission -->
        <div class="flex flex-row justify-center items-center">
          <button
            type="submit"
            class="bg-primary px-5 py-2 w-full text-lg font-medium text-white rounded-md border-2 border-solid border-primary hover:bg-secondary hover:border-secondary mt-6"
            [disabled]="loginForm.invalid"
          >
            Se connecter
          </button>
        </div>

        <!-- Inscription -->
        <div
          class="flex flex-col xl:flex-row xl:items-center xl:justify-center gap-5 mt-7 xl:mt-16 mb-8"
        >
          <div class="flex"><span>Pas encore de compte ?</span></div>
          <div class="flex text-cyan-700">
            <a routerLink="/register">S'inscrire</a>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
