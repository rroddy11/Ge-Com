<div class="">
  <div *ngIf="supplier && !isLoading">
    <div class="flex items-center justify-between mb-8">
      <h1 class="text-4xl font-bold text-tertiary">
        {{ supplier.name }}
      </h1>
      <button
        (click)="goBack()"
        class="flex items-center text-secondary hover:text-gray-800 transition-colors"
      >
        <fa-icon [icon]="faArrowLeft" class="mr-2"></fa-icon>
        {{ "COMMON.BACK" | translate }}
      </button>
    </div>

    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
      <div class="flex items-start mb-6">
        <div class="flex w-1/3 gap-10 mr-4">
          <div class="relative mb-6 w-full">
            <img
              [src]="supplier.image"
              [alt]="supplier.name"
              class="w-full h-72 object-cover rounded-lg shadow-md"
            />
          </div>
        </div>
        <div class="w-2/3">
          <h2 class="text-2xl font-semibold text-gray-900 mb-4">
            {{ "SUPPLIERS.STATISTICS" | translate }}
          </h2>

          <div class="grid grid-cols-2 gap-7">
            <div
              class="bg-gray-50 rounded-lg px-4 py-5 hover:shadow-lg hover:scale-105 transition-all duration-300"
            >
              <div class="flex items-center">
                <fa-icon
                  [icon]="faBoxOpen"
                  class="text-blue-500 mr-2"
                ></fa-icon>
                <span class="text-sm font-medium text-gray-700">{{
                  "SUPPLIERS.PRODUCTS_SUPPLIED" | translate
                }}</span>
              </div>
              <div class="text-2xl font-bold text-gray-900 mt-3">
                {{ supplier.productsSupplied }}
              </div>
            </div>

            <div
              class="bg-gray-50 rounded-lg px-4 py-5 hover:shadow-lg hover:scale-105 transition-all duration-300"
            >
              <div class="flex items-center">
                <fa-icon
                  [icon]="faShoppingCart"
                  class="text-green-500 mr-2"
                ></fa-icon>
                <span class="text-sm font-medium text-gray-700">{{
                  "SUPPLIERS.TOTAL_ORDERS" | translate
                }}</span>
              </div>
              <div class="text-2xl font-bold text-gray-900 mt-3">
                {{ supplier.totalOrders }}
              </div>
            </div>

            <div
              class="bg-gray-50 rounded-lg px-4 py-5 hover:shadow-lg hover:scale-105 transition-all duration-300"
            >
              <div class="flex items-center">
                <fa-icon
                  [icon]="faCalendarAlt"
                  class="text-purple-500 mr-2"
                ></fa-icon>
                <span class="text-sm font-medium text-gray-700">{{
                  "SUPPLIERS.LAST_DELIVERY" | translate
                }}</span>
              </div>
              <div class="text-lg font-semibold text-gray-900 mt-3">
                {{
                  supplier.lastDeliveryDate
                    ? (supplier.lastDeliveryDate | date)
                    : ("SUPPLIERS.NO_DELIVERIES" | translate)
                }}
              </div>
            </div>

            <div
              class="bg-gray-50 rounded-lg px-4 py-5 hover:shadow-lg hover:scale-105 transition-all duration-300"
            >
              <div class="flex items-center">
                <fa-icon [icon]="faStar" class="text-orange-500 mr-2"></fa-icon>
                <span class="text-sm font-medium text-gray-700">{{
                  "SUPPLIERS.RATING" | translate
                }}</span>
              </div>
              <div class="text-lg font-semibold text-gray-900 mt-3">
                {{ supplier.rating }}/5
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="gap-6">
        <div>
          <h2 class="text-2xl font-semibold text-gray-900 mb-4">
            {{ "SUPPLIERS.CONTACT_INFO" | translate }}
          </h2>
          <div class="flex justify-between item-center">
            <div class="space-x-3">
              <h1 class="text-3xl font-bold text-gray-900">
                {{ supplier.name }}
              </h1>

              <div class="flex items-center mt-2">
                <fa-icon
                  [icon]="getStatusIcon()"
                  [class]="getStatusColor() + ' mr-2'"
                ></fa-icon>
                <span class="text-sm font-medium mr-3">{{
                  getStatusTranslation()
                }}</span>

                <span
                  class="px-2 py-1 text-xs font-semibold rounded-full"
                  [class]="getRatingColor()"
                >
                  {{ getRatingTranslation() }}
                </span>
              </div>

              <div
                class="text-sm text-gray-500 mt-1"
                *ngIf="supplier.contactPerson"
              >
                {{ supplier.contactPerson }}
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex items-center">
                <fa-icon
                  [icon]="faEnvelope"
                  class="text-gray-400 mr-3 w-5"
                ></fa-icon>
                <span class="text-gray-700">{{ supplier.email }}</span>
              </div>

              <div class="flex items-center">
                <fa-icon
                  [icon]="faPhone"
                  class="text-gray-400 mr-3 w-5"
                ></fa-icon>
                <span class="text-gray-700">{{ supplier.phone }}</span>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex items-start">
                <fa-icon
                  [icon]="faMapMarkerAlt"
                  class="text-gray-400 mr-3 mt-1 w-5"
                ></fa-icon>
                <div>
                  <div class="text-gray-700">{{ supplier.address }}</div>
                  <div class="text-gray-700">
                    {{ supplier.postalCode }} {{ supplier.city }}
                  </div>
                  <div class="text-gray-700">{{ supplier.country }}</div>
                </div>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex items-center" *ngIf="supplier.taxNumber">
                <fa-icon
                  [icon]="faReceipt"
                  class="text-gray-400 mr-3 w-5"
                ></fa-icon>
                <span class="text-gray-700">{{ supplier.taxNumber }}</span>
              </div>

              <div class="flex items-center">
                <fa-icon
                  [icon]="faClock"
                  class="text-gray-400 mr-3 w-5"
                ></fa-icon>
                <span class="text-gray-700">{{ supplier.paymentTerms }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="mt-6 pt-6 border-t border-gray-200" *ngIf="supplier.notes">
        <h2 class="text-lg font-semibold text-gray-900 mb-3">
          {{ "SUPPLIERS.NOTES" | translate }}
        </h2>
        <p class="text-gray-700 bg-gray-50 rounded-lg p-4">
          {{ supplier.notes }}
        </p>
      </div>
    </div>

    <!-- Historique des transactions (simulÃ©) -->
    <div class="bg-white rounded-xl shadow-sm p-6">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">
        {{ "SUPPLIERS.RECENT_ACTIVITY" | translate }}
      </h2>

      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                {{ "SUPPLIERS.DATE" | translate }}
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                {{ "SUPPLIERS.ACTIVITY" | translate }}
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                {{ "SUPPLIERS.AMOUNT" | translate }}
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                {{ "SUPPLIERS.STATUS" | translate }}
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr
              *ngFor="let activity of getRecentActivities()"
              class="hover:bg-gray-50"
            >
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                {{ activity.date }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                {{ activity.description }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                {{ activity.amount }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span
                  class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"
                >
                  {{ activity.status }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Not found state -->
  <div *ngIf="!supplier && !isLoading" class="text-center py-12">
    <fa-icon
      [icon]="faTimesCircle"
      class="text-red-500 text-5xl mb-4"
    ></fa-icon>
    <h2 class="text-2xl font-bold text-gray-900 mb-2">
      {{ "SUPPLIERS.NOT_FOUND" | translate }}
    </h2>
    <p class="text-gray-600 mb-6">
      {{ "SUPPLIERS.SUPPLIER_NOT_FOUND" | translate }}
    </p>
    <button
      (click)="goBack()"
      class="bg-primary hover:bg-secondary text-white font-medium py-2 px-6 rounded-lg transition-colors"
    >
      {{ "COMMON.BACK_TO_SUPPLIERS" | translate }}
    </button>
  </div>
</div>
